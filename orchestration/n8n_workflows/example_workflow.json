{
  "meta": {
    "name": "Daily SKU replenishment",
    "notes": "Parametrized example n8n workflow"
  },
  "nodes": [
    {
      "id": "initSku",
      "name": "Set sku_id",
      "type": "n8n-nodes-base.set",
      "typeVersion": 2,
      "position": [200, 80],
      "parameters": {
        "keepOnlySet": true,
        "values": {
          "string": [
            {
              "name": "sku_id",
              "value": "FOODS_3_090_CA_1_validation"
            }
          ]
        }
      }
    },
    {
      "id": "scheduleTrigger",
      "name": "Daily Schedule",
      "type": "n8n-nodes-base.cron",
      "typeVersion": 1,
      "position": [200, 200],
      "parameters": {
        "triggerTimes": {
          "item": [
            {
              "mode": "everyDay",
              "minute": 0,
              "hour": 6
            }
          ]
        }
      }
    },
    {
      "id": "httpForecast",
      "name": "Get forecast",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 1,
      "position": [480, 200],
      "parameters": {
        "url": "={{$env.API_URL}}/forecasts/{{$json.sku_id}}",
        "method": "GET",
        "responseFormat": "json"
      }
    },
    {
      "id": "httpProcure",
      "name": "Get recommendation",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 1,
      "position": [760, 200],
      "parameters": {
        "url": "={{$env.API_URL}}/procure/recommendations",
        "method": "POST",
        "responseFormat": "json",
        "jsonParameters": true,
        "body": {
          "sku_id": "={{$json.sku_id}}",
          "horizon_days": 28
        }
      }
    },
    {
      "id": "httpExplain",
      "name": "Explain recommendation",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [1040, 200],
      "parameters": {
        "functionCode": "// Optionally call an explanation endpoint here.\nreturn items;"
      }
    }
  ],
  "connections": {
    "scheduleTrigger": {
      "main": [
        [
          {
            "node": "initSku",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "initSku": {
      "main": [
        [
          {
            "node": "httpForecast",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "httpForecast": {
      "main": [
        [
          {
            "node": "httpProcure",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "httpProcure": {
      "main": [
        [
          {
            "node": "httpExplain",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}
